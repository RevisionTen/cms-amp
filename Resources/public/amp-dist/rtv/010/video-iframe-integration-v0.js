(function(){var f;function h(a){return a||{}};var l;function m(a,c,b){var d=void 0,e=a,k=b;var g=function(a){try{return k(a)}catch(q){throw self.__AMP_REPORT_ERROR(q),q;}};var D=n(),r=!1;d&&(r=d.capture);e.addEventListener(c,g,D?d:r)}function n(){if(void 0!==l)return l;l=!1;try{var a={get capture(){l=!0}};self.addEventListener("test-options",null,a);self.removeEventListener("test-options",null,a)}catch(c){}return l};function p(a){new Promise(function(c){c(a())})};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function t(a,c){c=void 0===c?"":c;try{return decodeURIComponent(a)}catch(b){return c}};var u=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function v(a){var c=Object.create(null);if(!a)return c;for(var b;b=u.exec(a);){var d=t(b[1],b[1]);b=b[2]?t(b[2].replace(/\+/g," "),b[2]):"";c[d]=b}return c};var w="";
function x(a){var c=a||self;if(c.__AMP_MODE)var b=c.__AMP_MODE;else{b=c;var d=self.AMP_CONFIG||{},e=!!d.test||!1,k=v(b.location.originalHash||b.location.hash);d=d.spt;var g=v(b.location.search);w||(w=b.AMP_CONFIG&&b.AMP_CONFIG.v?b.AMP_CONFIG.v:"010");b={localDev:!1,development:!!(0<=["1","actions","amp","amp4ads","amp4email"].indexOf(k.development)||b.AMP_DEV_MODE),examiner:"2"==k.development,geoOverride:k["amp-geo"],userLocationOverride:k["amp-user-location"],minified:!0,lite:void 0!=g.amp_lite,test:e,
log:k.log,version:"0",rtvVersion:w,singlePassType:d};b=c.__AMP_MODE=b}return b};function y(a){var c=!1,b=null,d=a;return function(a){for(var e=[],g=0;g<arguments.length;++g)e[g-0]=arguments[g];c||(b=d.apply(self,e),c=!0,d=null);return b}};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};function z(a,c,b){m(a,c,b)};function A(a){var c;try{return JSON.parse(a)}catch(b){return c&&c(b),null}};function B(a,c){for(var b=[],d=1;d<arguments.length;++d)b[d-1]=arguments[d];if(!a)throw Error(b.join(" "));return a}var C="pause play mute unmute fullscreenenter fullscreenexit showcontrols hidecontrols".split(" "),E="canplay load playing pause ended muted unmuted".split(" ");
function F(a){var c=this;this.C=!0;this.w=0;this.h={};this.c=a;this.j={};this.m=y(function(){G(c.c,function(a){var b=a.id;"number"===typeof b&&isFinite(b)&&c.h[b]?((0,c.h[b])(a.args),delete c.h[b]):"method"==a.event&&(a=a.method,a in c.j&&c.j[a].call())})});this.o=this.l=!1;this.A=y(function(){var a=A(c.c.name),d=a.canonicalUrl,e=a.sourceUrl;return{canonicalUrl:d,sourceUrl:e}})}f=F.prototype;f.getMetadata=function(){return this.A()};
f.method=function(a,c){B(-1<C.indexOf(a),"Invalid method "+a+".");var b="play"==a||"pause"==a?H(c):c;this.j[a]=b;this.m()};
f.listenTo=function(a,c,b){var d=this;B(!this.o,"%s `listenTo` is meant to be used once per page.","<amp-video-iframe>");var e={jwplayer:function(){B(!b,"%s jwplayer integration does not take an initializer","<amp-video-iframe>");d.B(c)},videojs:function(){I(d,c,b)}};B(e[a.toLowerCase()],"%s Invalid listener type ["+a+"]. Valid types are ["+(Object.keys(e).join(", ")+"]"),"<amp-video-iframe>")();this.o=!0};
f.B=function(a){var c=arguments,b=this;["error","setupError"].forEach(function(e){a.on(e,function(){B.apply(null,[!1].concat(c));b.postEvent("error")})});["adSkipped","adComplete","adError"].forEach(function(c){a.on(c,function(){return b.postEvent("ad_end")})});a.on("adStarted",function(){return b.postEvent("ad_start")});var d={play:"playing",ready:"canplay",pause:"pause"};Object.keys(d).forEach(function(c){a.on(c,function(){return b.postEvent(d[c])})});a.on("volume",function(a){return J(b,a.volume)});
this.method("play",function(){return a.play()});this.method("pause",function(){return a.pause()});this.method("mute",function(){return a.setMute(!0)});this.method("unmute",function(){return a.setMute(!1)});this.method("showcontrols",function(){return a.setControls(!0)});this.method("hidecontrols",function(){return a.setControls(!1)});this.method("fullscreenenter",function(){return a.setFullscreen(!0)});this.method("fullscreenexit",function(){return a.setFullscreen(!1)})};
function I(a,c,b){var d=B(b||a.c.videojs,"Video.JS not imported or initializer undefined."),e=d(c);e.ready(function(){var b="canplay";["playing","pause","ended"].forEach(function(b){e.on(b,function(){return a.postEvent(b)})});if(3<=e.readyState())a.postEvent(b);else e.on(b,function(){return a.postEvent(b)});z(c,"volumechange",function(){return J(a,e.volume())});a.method("play",function(){return e.play()});a.method("pause",function(){return e.pause()});a.method("mute",function(){return e.muted(!0)});
a.method("unmute",function(){return e.muted(!1)});a.method("showcontrols",function(){return e.controls(!0)});a.method("hidecontrols",function(){return e.controls(!1)});a.method("fullscreenenter",function(){return e.requestFullscreen()});a.method("fullscreenexit",function(){return e.exitFullscreen()})})}function J(a,c){.01>c?(a.l=!0,a.postEvent("muted")):a.l&&(a.l=!1,a.postEvent("unmuted"))}function H(a){return function(){try{p(function(){return a()})}catch(c){}}}
f.postEvent=function(a){B(-1<E.indexOf(a),"%s Invalid event ["+a+"]","<amp-video-iframe>");K(this,h({event:a}))};f.postAnalyticsEvent=function(a,c){K(this,h({event:"analytics",analytics:{eventType:a,vars:c}}))};function K(a,c,b){var d=a.w++,e=Object.assign({id:d},c);!x(a.c).test&&a.c.parent&&a.c.parent.postMessage(e,"*");b&&(a.h[d]=b)}f.getIntersection=function(a){this.m();K(this,h({method:"getIntersection"}),a)};function G(a,c){z(a,"message",function(a){(a=A(a.data))&&c(a)})}
function L(){var a=self;B(!a.__AMP__VIDEO_IFRAME__,"%s video-iframe-integration-v0.js should only be included once.");a.__AMP__VIDEO_IFRAME__=!0;a.__AMP_REPORT_ERROR=console.error.bind(console);var c=new F(a),b=a.AmpVideoIframe=a.AmpVideoIframe||[];b.push=function(a){return a(c)};b.forEach(b.push)}x(self).test||L();})();

//# sourceMappingURL=video-iframe-integration-v0.js.map
