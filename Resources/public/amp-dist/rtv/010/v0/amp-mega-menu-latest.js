(self.AMP=self.AMP||[]).push({n:"amp-mega-menu",v:"0",f:(function(AMP,_){
var h,k="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},l;if("function"==typeof Object.setPrototypeOf)l=Object.setPrototypeOf;else{var m;a:{var n={a:!0},p={};try{p.__proto__=n;m=p.a;break a}catch(a){}m=!1}l=m?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var q=l;function r(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(c){return b}};var t=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;function u(a){return a?Array.prototype.slice.call(a):[]};self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var v=self.__AMP_LOG;function w(a,b){if(!v.user)throw Error("failed to call initLogConstructor");v.user.assert(a,b,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0)};var x=Object.prototype.hasOwnProperty;(function(a){return a||{}})({c:!0,v:!0,a:!0,ad:!0,action:!0});function y(a,b){if(a.__AMP__EXPERIMENT_TOGGLES)var c=a.__AMP__EXPERIMENT_TOGGLES;else{a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);c=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var d in a.AMP_CONFIG){var e=a.AMP_CONFIG[d];"number"===typeof e&&0<=e&&1>=e&&(c[d]=Math.random()<e)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length&&(d=a.AMP_CONFIG["allow-doc-opt-in"],e=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]'))){e=
e.getAttribute("content").split(",");for(var f=0;f<e.length;f++)-1!=d.indexOf(e[f])&&(c[e[f]]=!0)}Object.assign(c,z(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){d=a.AMP_CONFIG["allow-url-opt-in"];e=a.location.originalHash||a.location.hash;a=Object.create(null);if(e)for(var g;g=t.exec(e);)f=r(g[1],g[1]),g=g[2]?r(g[2].replace(/\+/g," "),g[2]):"",a[f]=g;for(e=0;e<d.length;e++)f=a["e-"+d[e]],"1"==f&&(c[d[e]]=!0),"0"==f&&(c[d[e]]=!1)}}var Y=
c;return!!Y[b]}function z(a){var b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(e){if(v.dev)a=v.dev;else throw Error("failed to call initLogConstructor");a.warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}var c=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(var d=0;d<c.length;d++)0!=c[d].length&&("-"==c[d][0]?a[c[d].substr(1)]=!1:a[c[d]]=!0);return a};var A={},B=(A["ampdoc-fie"]={isTrafficEligible:function(){return!0},branches:[["21065001"],["21065002"]]},A);function C(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView;b=b.__AMP_TOP||(b.__AMP_TOP=b);a=D(b,"ampdoc").getAmpDoc(a)}return a}function D(a,b){E(a,b);var c=a.__AMP_SERVICES;c||(c=a.__AMP_SERVICES={});var d=c;a=d[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function E(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
var F;function G(a){try{var b=a.ownerDocument,c=b.createElement("div"),d=b.createElement("div");c.appendChild(d);return c.querySelector(":scope div")===d}catch(e){return!1}};function H(a){var b=a.isConnected;if(void 0!==b)return b;do if(a=I(a),a.host)a=a.host;else break;while(1);return a.nodeType===Node.DOCUMENT_NODE}function I(a){if(Node.prototype.getRootNode)return a.getRootNode()||a;for(;a.parentNode&&(!a||"I-AMPHTML-SHADOW-ROOT"!=a.tagName&&(11!=a.nodeType||"[object ShadowRoot]"!==Object.prototype.toString.call(a)));a=a.parentNode);return a}function J(a,b,c){for(;a&&a!==c;a=a.parentElement)if(b(a))return a;return null}
function K(a){return a.closest?a.closest("header"):J(a,function(a){var b=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector;return b?b.call(a,"header"):!1})}function L(a,b){var c="i-amphtml-scoped";a.classList.add(c);var d=b.replace(/^|,/g,"$&."+c+" ");b=a.querySelectorAll(d);a.classList.remove(c);return b}function M(a,b){if(void 0!==F?F:F=G(a))return a.querySelector(b.replace(/^|,/g,"$&:scope "));var c=L(a,b);return void 0===c[0]?null:c[0]}
function aa(a){return(void 0!==F?F:F=G(a))?a.querySelectorAll("nav > * > li".replace(/^|,/g,"$&:scope ")):L(a,"nav > * > li")}function N(a){try{a.focus()}catch(b){}};var O=[];function ba(a){var b=[];a=P(a);for(var c={},d=0;d<a.length;c={j:c.j},d++)c.j=a[d],c.j.parentNode&&u(c.j.parentNode.children).filter(function(a){return function(b){return b!=a.j}}(c)).forEach(function(a){return b.push(a)});return b}function P(a){for(var b=[],c=a;c;c=c.parentNode||c.host)b.push(c);return b}
function ca(a){for(var b=[];a;){a=I(a);var c=a.querySelectorAll("a[href],area[href],button,details summary,iframe,input,select,textarea,[contenteditable],[draggable],[tabindex]");Array.prototype.push.apply(b,c);a=a.host}return b}
function da(a){O.every(function(b){return b.element!==a});H(a);var b=ba(a),c=P(a).filter(function(a){return a.nodeType==Node.ELEMENT_NODE}),d=ca(a),e=d.filter(function(b){return a.contains(b)&&void 0!==b.__AMP_MODAL_SAVED_TAB_INDEX}),f=d.filter(function(b){return!a.contains(b)&&void 0===b.__AMP_MODAL_SAVED_TAB_INDEX}),g=b.concat(c).map(function(a){return{element:a,prevValue:a.getAttribute("aria-hidden")}});c.forEach(function(a){return a.removeAttribute("aria-hidden")});b.forEach(function(a){return a.setAttribute("aria-hidden",
"true")});f.forEach(function(a){a.__AMP_MODAL_SAVED_TAB_INDEX=a.getAttribute("tabindex");a.setAttribute("tabindex","-1")});e.forEach(function(a){var b=a.__AMP_MODAL_SAVED_TAB_INDEX;null===b?a.removeAttribute("tabindex"):a.setAttribute("tabindex",b)});O.push({element:a,hiddenElementInfos:g,focusableExternalElements:f,focusableInternalElements:e})}
function ea(a){var b=O.pop(),c=b.hiddenElementInfos,d=b.focusableExternalElements;b=b.focusableInternalElements;H(a);c.forEach(function(a){var b=a.prevValue;a=a.element;var c=b;null===c?a.removeAttribute("aria-hidden"):a.setAttribute("aria-hidden",c)});b.forEach(function(a){a.setAttribute("tabindex","-1")});d.forEach(function(a){var b=a.__AMP_MODAL_SAVED_TAB_INDEX;null===b?a.removeAttribute("tabindex"):a.setAttribute("tabindex",b);a.__AMP_MODAL_SAVED_TAB_INDEX=void 0})};function Q(a){var b=AMP.BaseElement.call(this,a)||this;b.m=[];b.C=0;b.h=null;b.w=null;b.l=b.win.document;b.o=b.l.documentElement;b.A=null;b.J=a.id||Math.floor(100*Math.random());b.B=b.D.bind(b);b.F=b.H.bind(b);b.G=b.I.bind(b);return b}var R=AMP.BaseElement;Q.prototype=k(R.prototype);Q.prototype.constructor=Q;if(q)q(Q,R);else for(var S in R)if("prototype"!=S)if(Object.defineProperties){var T=Object.getOwnPropertyDescriptor(R,S);T&&Object.defineProperty(Q,S,T)}else Q[S]=R[S];Q.K=R.prototype;h=Q.prototype;
h.isLayoutSupported=function(a){return"fixed-height"===a};
h.buildCallback=function(){w(y(this.win,"amp-mega-menu"),"Turning on the amp-mega-menu experiment is necessary to use the amp-mega-menu component.");var a=this.element,b=a.ownerDocument.defaultView,c=b.__AMP_TOP||(b.__AMP_TOP=b),d=b!=c;if(y(c,"ampdoc-fie")){c.__AMP_EXPERIMENT_BRANCHES=c.__AMP_EXPERIMENT_BRANCHES||{};for(var e in B)if(x.call(B,e)&&!x.call(c.__AMP_EXPERIMENT_BRANCHES,e))if(B[e].isTrafficEligible&&B[e].isTrafficEligible(c)){if(!c.__AMP_EXPERIMENT_BRANCHES[e]&&y(c,e)){var f=B[e].branches;
c.__AMP_EXPERIMENT_BRANCHES[e]=f[Math.floor(Math.random()*f.length)]||null}}else c.__AMP_EXPERIMENT_BRANCHES[e]=null;c="21065002"===(c.__AMP_EXPERIMENT_BRANCHES?c.__AMP_EXPERIMENT_BRANCHES["ampdoc-fie"]:null)}else c=!1;d&&!c?a=E(b,"action")?D(b,"action"):null:(a=C(a),a=C(a),a=a.isSingleDoc()?a.win:a,a=E(a,"action")?D(a,"action"):null);this.A=a};
h.layoutCallback=function(){this.D();this.element.addEventListener("amp:dom-update",this.B);if(!this.w){var a=this.l.createElement("div");a.classList.add("i-amphtml-mega-menu-mask");a.setAttribute("aria-hidden","true");var b=K(this.element)||this.element;b.classList.add("i-amphtml-mega-menu-mask-parent");b.appendChild(a);this.w=a}return Promise.resolve()};h.unlayoutCallback=function(){this.element.removeEventListener("amp:dom-update",this.B);U(this);return!0};
h.D=function(){var a=this;this.m=u(aa(this.element));this.m.filter(function(a){return!a.classList.contains("i-amphtml-mega-menu-item")}).forEach(function(b){if(1==b.childElementCount)V(a,b,b.firstElementChild,null);else{var c=M(b,"> button")||M(b,"> [role=button]"),d=M(b,"> [role=dialog]");w(c,"amp-mega-menu requires each expandable item to include a button that toggles it.");V(a,b,c,d)}})};
function V(a,b,c,d){b.classList.add("i-amphtml-mega-menu-item");a.C++;c.classList.add("i-amphtml-mega-menu-heading");c.hasAttribute("tabindex")||c.setAttribute("tabindex",0);c.addEventListener("click",function(b){return W(a,b)});c.addEventListener("keydown",function(b){if(!b.defaultPrevented)switch(b.key){case "ArrowLeft":case "ArrowRight":var c=a.m.indexOf(b.currentTarget.parentElement);if(-1!==c){b.preventDefault();b="ArrowLeft"==b.key?-1:1;var d=a.l;"rtl"==(d.body.getAttribute("dir")||d.documentElement.getAttribute("dir")||
"ltr")&&(b=-b);c+=b;b=a.m.length;N(X(a.m[0<c&&0<b?c%b:(c%b+b)%b]))}break;case "Enter":case " ":b.target==b.currentTarget&&W(a,b)}});if(d&&!a.A.hasAction(c,"tap",b)){d.classList.add("i-amphtml-mega-menu-content");d.setAttribute("aria-modal","false");var e=d.getAttribute("id");e||(e=a.J+"_AMP_content_"+a.C,d.setAttribute("id",e));d.insertBefore(Z(a),d.firstChild);d.appendChild(Z(a));c.setAttribute("aria-haspopup","dialog");c.setAttribute("aria-controls",e);c.setAttribute("aria-expanded","false")}}
h.H=function(a){a=a.target;this.h&&!this.h.contains(a)&&H(a)&&U(this)};h.I=function(a){"Escape"===a.key&&U(this)&&a.preventDefault()};function W(a,b){if(fa(a,b)){b.preventDefault();b.stopPropagation();b=b.currentTarget.parentElement;var c=U(a);b!=c&&ha(a,b)}}function fa(a,b){var c=b.target,d=b.currentTarget,e=!!J(c,function(a){return"A"==a.tagName},d);if(e)return!1;var f=a.A.hasAction(c,"tap",d);return f?!1:d.hasAttribute("aria-haspopup")}
function ha(a,b){a.mutateElement(function(){var a=M(b,"> .i-amphtml-mega-menu-content");da(a);a.setAttribute("aria-modal","true")});b.setAttribute("open","");a.element.setAttribute("open","");a.w.setAttribute("open","");X(b).setAttribute("aria-expanded","true");var c=b.querySelector(".i-amphtml-screen-reader");N(c);a.o.addEventListener("click",a.F);a.o.addEventListener("keydown",a.G);a.h=b}
function U(a){if(!a.h)return null;var b=a.h;a.mutateElement(function(){var a=M(b,"> .i-amphtml-mega-menu-content");ea(a);a.setAttribute("aria-modal","false")});b.removeAttribute("open");a.element.removeAttribute("open");a.w.removeAttribute("open");var c=X(b);c.setAttribute("aria-expanded","false");b.contains(a.l.activeElement)&&N(c);a.o.removeEventListener("click",a.F);a.o.removeEventListener("keydown",a.G);a.h=null;return b}function X(a){return M(a,"> .i-amphtml-mega-menu-heading")}
function Z(a){var b=a.element.getAttribute("data-close-button-aria-label")||"Close the menu",c=a.l.createElement("button");c.textContent=b;c.classList.add("i-amphtml-screen-reader");c.addEventListener("click",function(){return U(a)});return c}(function(a){a.registerElement("amp-mega-menu",Q,"amp-mega-menu{z-index:1000!important;white-space:nowrap!important}amp-mega-menu.i-amphtml-layout-size-defined[open]{overflow:visible!important}amp-mega-menu nav{background:#fff}amp-mega-menu nav>*{margin:0}amp-mega-menu .i-amphtml-mega-menu-item{display:inline-block!important}amp-mega-menu .i-amphtml-mega-menu-heading{cursor:pointer!important}amp-mega-menu .i-amphtml-mega-menu-content{position:absolute!important;left:0;width:100vw;opacity:0!important;visibility:hidden!important;background:#fff}amp-mega-menu .i-amphtml-mega-menu-item[open]>.i-amphtml-mega-menu-content{visibility:visible!important;opacity:1!important}amp-mega-menu .i-amphtml-mega-menu-item:not([open]) .i-amphtml-screen-reader{display:none!important}.i-amphtml-mega-menu-mask-parent{z-index:1000!important;position:relative}.i-amphtml-mega-menu-mask{position:fixed!important;z-index:-1!important;visibility:hidden!important;opacity:0!important;top:0!important;bottom:0!important;left:0!important;right:0!important;background:rgba(0,0,0,0.5);transition:opacity 200ms,visibility 0s 200ms}.i-amphtml-mega-menu-mask[open]{opacity:1!important;visibility:visible!important;transition:opacity 200ms}\n/*# sourceURL=/extensions/amp-mega-menu/0.1/amp-mega-menu.css*/")})(self.AMP);
})});

//# sourceMappingURL=amp-mega-menu-0.1.js.map
