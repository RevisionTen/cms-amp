(self.AMP=self.AMP||[]).push({n:"amp-orientation-observer",v:"0",f:(function(AMP,_){
var h="function"==typeof Object.create?Object.create:function(a){function b(){}b.prototype=a;return new b},k;if("function"==typeof Object.setPrototypeOf)k=Object.setPrototypeOf;else{var m;a:{var n={a:!0},p={};try{p.__proto__=n;m=p.a;break a}catch(a){}m=!1}k=m?function(a,b){a.__proto__=b;if(a.__proto__!==b)throw new TypeError(a+" is not extensible");return a}:null}var q=k;function r(a,b){b=void 0===b?"":b;try{return decodeURIComponent(a)}catch(d){return b}};var t=/(?:^[#?]?|&)([^=&]+)(?:=([^&]*))?/g;self.__AMP_LOG=self.__AMP_LOG||{user:null,dev:null,userForEmbed:null};var u=self.__AMP_LOG;var v=Object.prototype.hasOwnProperty;function w(a,b){if(a.__AMP__EXPERIMENT_TOGGLES)var d=a.__AMP__EXPERIMENT_TOGGLES;else{a.__AMP__EXPERIMENT_TOGGLES=Object.create(null);d=a.__AMP__EXPERIMENT_TOGGLES;if(a.AMP_CONFIG)for(var e in a.AMP_CONFIG){var c=a.AMP_CONFIG[e];"number"===typeof c&&0<=c&&1>=c&&(d[e]=Math.random()<c)}if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-doc-opt-in"])&&0<a.AMP_CONFIG["allow-doc-opt-in"].length&&(e=a.AMP_CONFIG["allow-doc-opt-in"],c=a.document.head.querySelector('meta[name="amp-experiments-opt-in"]'))){c=
c.getAttribute("content").split(",");for(var f=0;f<c.length;f++)-1!=e.indexOf(c[f])&&(d[c[f]]=!0)}Object.assign(d,x(a));if(a.AMP_CONFIG&&Array.isArray(a.AMP_CONFIG["allow-url-opt-in"])&&0<a.AMP_CONFIG["allow-url-opt-in"].length){e=a.AMP_CONFIG["allow-url-opt-in"];c=a.location.originalHash||a.location.hash;a=Object.create(null);if(c)for(var g;g=t.exec(c);)f=r(g[1],g[1]),g=g[2]?r(g[2].replace(/\+/g," "),g[2]):"",a[f]=g;for(c=0;c<e.length;c++)f=a["e-"+e[c]],"1"==f&&(d[e[c]]=!0),"0"==f&&(d[e[c]]=!1)}}var l=
d;return!!l[b]}function x(a){var b="";try{"localStorage"in a&&(b=a.localStorage.getItem("amp-experiment-toggles"))}catch(c){if(u.dev)a=u.dev;else throw Error("failed to call initLogConstructor");a.warn("EXPERIMENTS","Failed to retrieve experiments from localStorage.")}var d=b?b.split(/\s*,\s*/g):[];a=Object.create(null);for(var e=0;e<d.length;e++)0!=d[e].length&&("-"==d[e][0]?a[d[e].substr(1)]=!1:a[d[e]]=!0);return a};var y={},z=(y["ampdoc-fie"]={isTrafficEligible:function(){return!0},branches:[["21065001"],["21065002"]]},y);function A(a){if(a.nodeType){var b=(a.ownerDocument||a).defaultView;b=b.__AMP_TOP||(b.__AMP_TOP=b);a=B(b,"ampdoc").getAmpDoc(a)}return a}function B(a,b){C(a,b);var d=a.__AMP_SERVICES;d||(d=a.__AMP_SERVICES={});var e=d;a=e[b];a.obj||(a.obj=new a.ctor(a.context),a.ctor=null,a.context=null,a.resolve&&a.resolve(a.obj));return a.obj}function C(a,b){a=a.__AMP_SERVICES&&a.__AMP_SERVICES[b];return!(!a||!a.ctor&&!a.obj)};/*
 https://mths.be/cssescape v1.5.1 by @mathias | MIT license */
function D(a){return a.reduce(function(a,d){return a+d})};var E=["alpha","beta","gamma"],F={alpha:180,beta:0,gamma:0},G={alpha:[0,360],beta:[-180,180],gamma:[-90,90]};function H(a){a=AMP.BaseElement.call(this,a)||this;a.w=A(a.element);a.o=null;a.l=Object.assign({},G);a.j=Object.assign({},F);a.m=Object.assign({},F);a.c={beta:[],alpha:[],gamma:[]};a.h=null;return a}var I=AMP.BaseElement;H.prototype=h(I.prototype);H.prototype.constructor=H;
if(q)q(H,I);else for(var J in I)if("prototype"!=J)if(Object.defineProperties){var K=Object.getOwnPropertyDescriptor(I,J);K&&Object.defineProperty(H,J,K)}else H[J]=I[J];H.B=I.prototype;
H.prototype.buildCallback=function(){var a=this.element,b=a.ownerDocument.defaultView,d=b.__AMP_TOP||(b.__AMP_TOP=b),e=b!=d;if(w(d,"ampdoc-fie")){d.__AMP_EXPERIMENT_BRANCHES=d.__AMP_EXPERIMENT_BRANCHES||{};for(var c in z)if(v.call(z,c)&&!v.call(d.__AMP_EXPERIMENT_BRANCHES,c))if(z[c].isTrafficEligible&&z[c].isTrafficEligible(d)){if(!d.__AMP_EXPERIMENT_BRANCHES[c]&&w(d,c)){var f=z[c].branches;d.__AMP_EXPERIMENT_BRANCHES[c]=f[Math.floor(Math.random()*f.length)]||null}}else d.__AMP_EXPERIMENT_BRANCHES[c]=
null;d="21065002"===(d.__AMP_EXPERIMENT_BRANCHES?d.__AMP_EXPERIMENT_BRANCHES["ampdoc-fie"]:null)}else d=!1;e&&!d?a=C(b,"action")?B(b,"action"):null:(a=A(a),a=A(a),a=a.isSingleDoc()?a.win:a,a=C(a,"action")?B(a,"action"):null);this.o=a;this.w.whenFirstVisible().then(this.A.bind(this))};
H.prototype.A=function(){var a=this;if(!u.user)throw Error("failed to call initLogConstructor");u.user.assert(this.win.DeviceOrientationEvent,"The current browser doesn't support the `window.DeviceOrientationEvent`",void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0);E.forEach(function(b){var d=a.l;var e=a.l[b];var c=a.element.getAttribute(b+"-range");c&&(e=c.trim().split(" "),e=[parseInt(e[0],10),parseInt(e[1],10)]);d[b]=e});this.h=this.element.hasAttribute("smoothing")?Number(this.element.getAttribute("smoothing"))||
4:null;this.win.addEventListener("deviceorientation",function(b){L(a,b)},!0)};
function L(a,b){if(b instanceof DeviceOrientationEvent){var d=a.win.screen,e=b.alpha,c=b.gamma,f=b.beta;b="orientation"in d?d.orientation.angle:d.orientation;if(90==a.win.orientation||-90==a.win.orientation){var g=c;c=f;f=g}0>b&&(c=-c,f=-f);var l={alpha:e,beta:f,gamma:c};E.forEach(function(b){if(.1<Math.abs(l[b]-a.j[b])){var d=a.j;if(a.h){var c=l[b];a.c[b].length>a.h&&a.c[b].shift();a.c[b].push(c);c=D(a.c[b])/a.h;a.c[b].length>a.h&&a.m[b]==F[b]&&(a.m[b]=c);c-=a.m[b]}else c=l[b];d[b]=c;c=a.j[b];var e=
a.l[b],f=0>e[0]?c.toFixed()-e[0]:c.toFixed();d=a.win;c={angle:Math.min(Math.max(c,e[0]),e[1]).toFixed(),percent:f/(e[1]-e[0])};e="amp-orientation-observer."+b;f={detail:c};Object.assign(f,void 0);"function"==typeof d.CustomEvent?d=new d.CustomEvent(e,f):(d=d.document.createEvent("CustomEvent"),d.initCustomEvent(e,!!f.bubbles,!!f.cancelable,c));a.o.trigger(a.element,b,d,1)}})}}(function(a){a.registerElement("amp-orientation-observer",H)})(self.AMP);
})});

//# sourceMappingURL=amp-orientation-observer-0.1.js.map
